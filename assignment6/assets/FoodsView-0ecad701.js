import{u as $,a as I,r as m,j as M,o as U,b as i,c as l,d as h,e,w as b,h as f,t as d,k as V,v as B,F as y,f as P,l as D,m as k,R as L,p as F,i as K}from"./index-c54bdbf7.js";import{L as H,_ as z}from"./index.esm-e638bc7d.js";import{_ as Y,C as j}from"./CNavbar-3c67aefe.js";const A=_=>(F("data-v-e62c8062"),_=_(),K(),_),O={class:"container"},E={class:"row"},J={class:"col-6"},Q={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},X={class:"breadcrumb"},q={class:"breadcrumb-item"},G={class:"breadcrumb-item"},W={class:"breadcrumb-item active","aria-current":"page"},Z={class:"col-6"},tt=["value","selected"],et={class:"container"},at={class:"row",style:{"margin-right":"0"}},st={class:"col-6 area-site"},nt={class:"row row-cols-2 g-2"},ot=["onClick"],it={key:0},lt=["src"],ct={key:1},rt=A(()=>e("img",{src:z,class:"card-img-top",alt:"沒有餐廳圖片"},null,-1)),ut=[rt],dt={class:"card-body"},_t={class:"circle-label"},pt=["title"],mt={class:"card-text"},vt={class:"badge rounded-pill bg-success"},ht={__name:"FoodsView",setup(_){const p=$(),N=I(),c=m(),g=m(),v=m([{title:"基隆市",name:"Keelung"},{title:"臺北市",name:"Taipei"},{title:"新北市",name:"NewTaipei"},{title:"桃園市",name:"Taoyuan"},{title:"苗栗縣",name:"MiaoliCounty"},{title:"新竹縣",name:"HsinchuCounty"},{title:"新竹市",name:"Hsinchu"},{title:"臺中市",name:"Taichung"},{title:"彰化縣",name:"ChanghuaCounty"},{title:"南投縣",name:"NantouCounty"},{title:"雲林縣",name:"YunlinCounty"},{title:"嘉義縣",name:"ChiayiCounty"},{title:"嘉義市",name:"Chiayi"},{title:"臺南市",name:"Tainan"},{title:"高雄市",name:"Kaohsiung"},{title:"屏東縣",name:"PingtungCounty"},{title:"宜蘭縣",name:"YilanCounty"},{title:"花蓮縣",name:"HualienCounty"},{title:"臺東縣",name:"TaitungCounty"},{title:"金門縣",name:"KinmenCounty"},{title:"澎湖縣",name:"PenghuCounty"},{title:"連江縣",name:"LienchiangCounty"}]),n=m("NewTaipei"),R=M(()=>v.value.find(a=>a.name===n.value).title);async function x(){p.push({path:`/foods/${n.value}/`}),await C(),await w()}async function C(){try{const s=await D({method:"get",url:`https://tdx.transportdata.tw/api/basic/v2/Tourism/Restaurant/${n.value}`,params:{$top:"10",$format:"JSON"}});c.value=s.data.map(a=>{var t;return{City:a.City,RestaurantID:a.RestaurantID,RestaurantName:a.RestaurantName,Class:(a==null?void 0:a.Class)||"",Picture:{PictureUrl1:((t=a==null?void 0:a.Picture)==null?void 0:t.PictureUrl1)||""},Position:a.Position}})}catch(s){alert(s)}}async function w(){const s=new H({apiKey:"AIzaSyC42jlw7i6yloHhAXQp_M7Lxh7_KxzY9bI",version:"weekly",libraries:["places"]}),a={center:{lat:0,lng:0},zoom:11},t=await s.load(),r=new t.maps.Map(g.value,a),u=new t.maps.LatLngBounds;for(let o=0;o<c.value.length;o++){const T=new t.maps.Marker({position:{lat:c.value[o].Position.PositionLat,lng:c.value[o].Position.PositionLon},map:r,title:c.value[o].name,label:(10+o).toString(36).toUpperCase()});u.extend(T.position)}r.fitBounds(u)}async function S(s){await p.push({path:`/food/${n.value}/${s.RestaurantID}`}),await p.go()}return U(async()=>{const s=v.value.find(a=>a.name.toLowerCase()===N.params.city.toLowerCase());n.value=(s==null?void 0:s.name)||n.value,p.replace(`/foods/${n.value}/`),await C(),await w()}),(s,a)=>(i(),l(y,null,[h(j),e("main",null,[e("div",O,[e("div",E,[e("div",J,[e("nav",Q,[e("ol",X,[e("li",q,[h(f(L),{to:"/"},{default:b(()=>[k("首頁")]),_:1})]),e("li",G,[h(f(L),{to:"/foods/NewTaipei"},{default:b(()=>[k("美食餐廳")]),_:1})]),e("li",W,d(R.value),1)])])]),e("div",Z,[V(e("select",{id:"selectedCity",onChange:a[0]||(a[0]=t=>x()),"onUpdate:modelValue":a[1]||(a[1]=t=>n.value=t)},[(i(!0),l(y,null,P(v.value,t=>(i(),l("option",{value:t.name,key:t.name,selected:t.name===t.value},d(t.title),9,tt))),128))],544),[[B,n.value]])])])]),e("div",et,[e("div",at,[e("div",{ref_key:"areaMap",ref:g,class:"col-6 area-map"},null,512),e("div",st,[e("div",nt,[(i(!0),l(y,null,P(c.value,(t,r)=>{var u;return i(),l("div",{class:"col",key:r},[e("div",{class:"card",onClick:o=>S(t)},[(u=t==null?void 0:t.Picture)!=null&&u.PictureUrl1?(i(),l("div",it,[e("img",{src:t.Picture.PictureUrl1,class:"card-img-top",alt:"餐廳圖片"},null,8,lt)])):(i(),l("div",ct,ut)),e("div",dt,[e("div",_t,d((10+r).toString(36).toUpperCase()),1),e("h5",{class:"card-title",title:t.RestaurantName},d(t.RestaurantName),9,pt),e("p",mt,[e("span",vt,d(t.Class),1)])])],8,ot)])}),128))])])])])])],64))}},wt=Y(ht,[["__scopeId","data-v-e62c8062"]]);export{wt as default};
