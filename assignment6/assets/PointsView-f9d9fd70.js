import{u as I,a as M,r as v,j as U,o as V,b as l,c,d as g,e,w as f,h as P,t as d,k as B,v as D,F as h,f as S,l as K,m as k,R as L,p as H,i as R}from"./index-c54bdbf7.js";import{L as z,_ as Y}from"./index.esm-e638bc7d.js";import{_ as j,C as A}from"./CNavbar-3c67aefe.js";const F=p=>(H("data-v-66803ed7"),p=p(),R(),p),O={class:"container"},E={class:"row"},J={class:"col-6"},Q={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},X={class:"breadcrumb"},q={class:"breadcrumb-item"},G={class:"breadcrumb-item"},W={class:"breadcrumb-item active","aria-current":"page"},Z={class:"col-6"},tt=["value","selected"],at={class:"container"},et={class:"row",style:{"margin-right":"0"}},st={class:"col-6 area-site"},ot={class:"row row-cols-2 g-2"},nt=["onClick"],lt={key:0},ct=["src"],it={key:1},rt=F(()=>e("img",{src:Y,class:"card-img-top",alt:"沒有餐廳圖片"},null,-1)),ut=[rt],dt={class:"card-body"},pt={class:"circle-label"},_t=["title"],vt={class:"card-text"},ht={__name:"PointsView",setup(p){const _=I(),x=M(),i=v(),w=v(),y=v([{title:"基隆市",name:"Keelung"},{title:"臺北市",name:"Taipei"},{title:"新北市",name:"NewTaipei"},{title:"桃園市",name:"Taoyuan"},{title:"苗栗縣",name:"MiaoliCounty"},{title:"新竹縣",name:"HsinchuCounty"},{title:"新竹市",name:"Hsinchu"},{title:"臺中市",name:"Taichung"},{title:"彰化縣",name:"ChanghuaCounty"},{title:"南投縣",name:"NantouCounty"},{title:"雲林縣",name:"YunlinCounty"},{title:"嘉義縣",name:"ChiayiCounty"},{title:"嘉義市",name:"Chiayi"},{title:"臺南市",name:"Tainan"},{title:"高雄市",name:"Kaohsiung"},{title:"屏東縣",name:"PingtungCounty"},{title:"宜蘭縣",name:"YilanCounty"},{title:"花蓮縣",name:"HualienCounty"},{title:"臺東縣",name:"TaitungCounty"},{title:"金門縣",name:"KinmenCounty"},{title:"澎湖縣",name:"PenghuCounty"},{title:"連江縣",name:"LienchiangCounty"}]),o=v("Taipei"),N=U(()=>y.value.find(t=>t.name===o.value).title);async function T(){_.push({path:`/points/${o.value}/`}),await m(),await b()}async function m(){try{const s=await K({method:"get",url:`https://tdx.transportdata.tw/api/basic/v2/Tourism/ScenicSpot/${o.value}`,params:{$top:"10",$format:"JSON"}});i.value=s.data.map(t=>{var a;return{ScenicSpotID:t.ScenicSpotID,City:t.City,ScenicSpotName:t.ScenicSpotName,tags:[...t!=null&&t.Class1?[t==null?void 0:t.Class1]:[],...t!=null&&t.Class2?[t==null?void 0:t.Class2]:[],...t!=null&&t.Class3?[t==null?void 0:t.Class3]:[],...t!=null&&t.Level?[t==null?void 0:t.Level]:[]],Picture:{PictureUrl1:((a=t==null?void 0:t.Picture)==null?void 0:a.PictureUrl1)||""},Position:t.Position}})}catch(s){alert(s)}}async function b(){const s=new z({apiKey:"AIzaSyC42jlw7i6yloHhAXQp_M7Lxh7_KxzY9bI",version:"weekly",libraries:["places"]}),t={center:{lat:0,lng:0},zoom:11},a=await s.load(),r=new a.maps.Map(w.value,t),u=new a.maps.LatLngBounds;for(let n=0;n<i.value.length;n++){const C=new a.maps.Marker({position:{lat:i.value[n].Position.PositionLat,lng:i.value[n].Position.PositionLon},map:r,title:i.value[n].ScenicSpotName,label:(10+n).toString(36).toUpperCase()});u.extend(C.position)}r.fitBounds(u)}V(async()=>{const s=y.value.find(t=>t.name.toLowerCase()===x.params.city.toLowerCase());o.value=(s==null?void 0:s.name)||o.value,_.replace(`/points/${o.value}/`),await m(),await b()});async function $(s){await _.push({path:`/point/${o.value}/${s.ScenicSpotID}`}),await _.go()}return(s,t)=>(l(),c(h,null,[g(A),e("main",null,[e("div",O,[e("div",E,[e("div",J,[e("nav",Q,[e("ol",X,[e("li",q,[g(P(L),{to:"/"},{default:f(()=>[k("首頁")]),_:1})]),e("li",G,[g(P(L),{to:"/points/Taipei"},{default:f(()=>[k("旅遊景點")]),_:1})]),e("li",W,d(N.value),1)])])]),e("div",Z,[B(e("select",{id:"selectedCity",onChange:t[0]||(t[0]=a=>T()),"onUpdate:modelValue":t[1]||(t[1]=a=>o.value=a)},[(l(!0),c(h,null,S(y.value,a=>(l(),c("option",{value:a.name,key:a.name,selected:a.name===o.value.value},d(a.title),9,tt))),128))],544),[[D,o.value]])])])]),e("div",at,[e("div",et,[e("div",{ref_key:"areaMap",ref:w,class:"col-6 area-map"},null,512),e("div",st,[e("div",ot,[(l(!0),c(h,null,S(i.value,(a,r)=>{var u;return l(),c("div",{class:"col",key:r},[e("div",{class:"card",onClick:n=>$(a)},[(u=a==null?void 0:a.Picture)!=null&&u.PictureUrl1?(l(),c("div",lt,[e("img",{src:a.Picture.PictureUrl1,class:"card-img-top",alt:"餐廳圖片"},null,8,ct)])):(l(),c("div",it,ut)),e("div",dt,[e("div",pt,d((10+r).toString(36).toUpperCase()),1),e("h5",{class:"card-title",title:a.ScenicSpotName},d(a.ScenicSpotName),9,_t),e("p",vt,[(l(!0),c(h,null,S(a.tags,(n,C)=>(l(),c("span",{class:"badge rounded-pill bg-success text-white",key:C},d(n),1))),128))])])],8,nt)])}),128))])])])])])],64))}},St=j(ht,[["__scopeId","data-v-66803ed7"]]);export{St as default};
