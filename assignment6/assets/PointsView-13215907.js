import{u as M,i as U,r as v,j as V,o as B,a as l,c,b as C,d as t,w as m,g as P,t as d,k as D,v as K,F as h,e as w,l as H,m as k,R as L,p as R,h as z}from"./index-aa0dd8a0.js";import{L as Y,_ as j}from"./index.esm-e638bc7d.js";import{_ as A,C as F}from"./CNavbar-cd01e497.js";const x=p=>(R("data-v-a5f377ef"),p=p(),z(),p),O={class:"container"},E={class:"row"},J={class:"col"},Q={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},X={class:"breadcrumb"},q={class:"breadcrumb-item"},G={class:"breadcrumb-item"},W={class:"breadcrumb-item active","aria-current":"page"},Z={class:"row"},aa=x(()=>t("div",{class:"col-6"},[t("h5",null,"旅遊景點")],-1)),ta={class:"col-6"},ea=["value","selected"],sa={class:"container-fluid"},oa={class:"row",style:{"margin-right":"0"}},na={class:"col-6 area-site"},la={class:"row row-cols-2 g-2"},ca=["onClick"],ia={key:0},ra=["src"],ua={key:1},da=x(()=>t("img",{src:j,class:"card-img-top",alt:"沒有餐廳圖片"},null,-1)),pa=[da],_a={class:"card-body"},va={class:"circle-label"},ha={class:"card-title"},ya={class:"card-text"},ga={__name:"PointsView",setup(p){const _=M(),N=U(),i=v(),S=v(),y=v([{title:"基隆市",name:"Keelung"},{title:"臺北市",name:"Taipei"},{title:"新北市",name:"NewTaipei"},{title:"桃園市",name:"Taoyuan"},{title:"苗栗縣",name:"MiaoliCounty"},{title:"新竹縣",name:"HsinchuCounty"},{title:"新竹市",name:"Hsinchu"},{title:"臺中市",name:"Taichung"},{title:"彰化縣",name:"ChanghuaCounty"},{title:"南投縣",name:"NantouCounty"},{title:"雲林縣",name:"YunlinCounty"},{title:"嘉義縣",name:"ChiayiCounty"},{title:"嘉義市",name:"Chiayi"},{title:"臺南市",name:"Tainan"},{title:"高雄市",name:"Kaohsiung"},{title:"屏東縣",name:"PingtungCounty"},{title:"宜蘭縣",name:"YilanCounty"},{title:"花蓮縣",name:"HualienCounty"},{title:"臺東縣",name:"TaitungCounty"},{title:"金門縣",name:"KinmenCounty"},{title:"澎湖縣",name:"PenghuCounty"},{title:"連江縣",name:"LienchiangCounty"}]),o=v("Taipei"),T=V(()=>y.value.find(a=>a.name===o.value).title);async function $(){_.push({path:`/points/${o.value}/`}),await f(),await b()}async function f(){try{const s=await H({method:"get",url:`https://tdx.transportdata.tw/api/basic/v2/Tourism/ScenicSpot/${o.value}`,params:{$top:"10",$format:"JSON"}});console.log(s.data),i.value=s.data.map(a=>{var e;return{ScenicSpotID:a.ScenicSpotID,City:a.City,ScenicSpotName:a.ScenicSpotName,tags:[...a!=null&&a.Class1?[a==null?void 0:a.Class1]:[],...a!=null&&a.Class2?[a==null?void 0:a.Class2]:[],...a!=null&&a.Class3?[a==null?void 0:a.Class3]:[],...a!=null&&a.Level?[a==null?void 0:a.Level]:[]],Picture:{PictureUrl1:((e=a==null?void 0:a.Picture)==null?void 0:e.PictureUrl1)||""},Position:a.Position}}),console.log("tdxSpot.value",i.value)}catch(s){alert(s)}}async function b(){const s=new Y({apiKey:"AIzaSyC42jlw7i6yloHhAXQp_M7Lxh7_KxzY9bI",version:"weekly",libraries:["places"]}),a={center:{lat:0,lng:0},zoom:11},e=await s.load(),r=new e.maps.Map(S.value,a),u=new e.maps.LatLngBounds;for(let n=0;n<i.value.length;n++){const g=new e.maps.Marker({position:{lat:i.value[n].Position.PositionLat,lng:i.value[n].Position.PositionLon},map:r,title:i.value[n].ScenicSpotName,label:(10+n).toString(36).toUpperCase()});u.extend(g.position)}r.fitBounds(u)}B(async()=>{const s=y.value.find(a=>a.name.toLowerCase()===N.params.city.toLowerCase());o.value=(s==null?void 0:s.name)||o.value,_.replace(`/points/${o.value}/`),await f(),await b()});async function I(s){await _.push({path:`/point/${o.value}/${s.ScenicSpotID}`}),await _.go()}return(s,a)=>(l(),c(h,null,[C(F),t("main",null,[t("div",O,[t("div",E,[t("div",J,[t("nav",Q,[t("ol",X,[t("li",q,[C(P(L),{to:"/"},{default:m(()=>[k("首頁")]),_:1})]),t("li",G,[C(P(L),{to:"/points/Taipei"},{default:m(()=>[k("旅遊景點")]),_:1})]),t("li",W,d(T.value),1)])])])]),t("div",Z,[aa,t("div",ta,[D(t("select",{id:"selectedCity",onChange:a[0]||(a[0]=e=>$()),"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e)},[(l(!0),c(h,null,w(y.value,e=>(l(),c("option",{value:e.name,key:e.name,selected:e.name===o.value.value},d(e.title),9,ea))),128))],544),[[K,o.value]])])])]),t("div",sa,[t("div",oa,[t("div",{ref_key:"areaMap",ref:S,class:"col-6 area-map"},null,512),t("div",na,[t("div",la,[(l(!0),c(h,null,w(i.value,(e,r)=>{var u;return l(),c("div",{class:"col",key:r},[t("div",{class:"card",onClick:n=>I(e)},[(u=e==null?void 0:e.Picture)!=null&&u.PictureUrl1?(l(),c("div",ia,[t("img",{src:e.Picture.PictureUrl1,class:"card-img-top",alt:"餐廳圖片"},null,8,ra)])):(l(),c("div",ua,pa)),t("div",_a,[t("div",va,d((10+r).toString(36).toUpperCase()),1),t("h5",ha,d(e.ScenicSpotName),1),t("p",ya,[(l(!0),c(h,null,w(e.tags,(n,g)=>(l(),c("span",{class:"badge rounded-pill bg-success text-white",key:g},d(n),1))),128))])])],8,ca)])}),128))])])])])])],64))}},fa=A(ga,[["__scopeId","data-v-a5f377ef"]]);export{fa as default};
